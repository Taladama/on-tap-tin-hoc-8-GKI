<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în T·∫≠p Tin H·ªçc 8 - Pro Game Mode</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Quicksand', sans-serif; }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        /* Animations */
        .slide-in-right { animation: slideInRight 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        @keyframes slideInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }

        .slide-out-left {
            opacity: 0 !important;
            transform: translateX(-30px) !important;
            transition: all 0.25s cubic-bezier(0.55, 0.085, 0.68, 0.53);
            pointer-events: none;
        }

        .scale-in { animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        /* Timer Animation */
        .timer-pulse { animation: timerPulse 1s infinite; }
        @keyframes timerPulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); color: #ef4444; } 100% { transform: scale(1); } }

        .custom-scroll::-webkit-scrollbar { width: 8px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100 min-h-screen flex items-center justify-center p-4 selection:bg-indigo-200">
    <div id="root" class="w-full max-w-3xl"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- √ÇM THANH SYNTHESIZER (Kh√¥ng c·∫ßn file ngo√†i) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        const playSound = (type) => {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            const now = audioCtx.currentTime;

            if (type === 'correct') {
                // Ti·∫øng "Ting" chi·∫øn th·∫Øng: H·ª£p √¢m tr∆∞·ªüng
                osc.type = 'sine';
                osc.frequency.setValueAtTime(523.25, now); // C5
                osc.frequency.exponentialRampToValueAtTime(1046.5, now + 0.1); // C6
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
                osc.start(now);
                osc.stop(now + 0.4);
                
                // L·ªõp th·ª© 2 cho d√†y ti·∫øng
                const osc2 = audioCtx.createOscillator();
                const gain2 = audioCtx.createGain();
                osc2.connect(gain2);
                gain2.connect(audioCtx.destination);
                osc2.type = 'triangle';
                osc2.frequency.setValueAtTime(659.25, now); // E5
                gain2.gain.setValueAtTime(0.1, now);
                gain2.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
                osc2.start(now);
                osc2.stop(now + 0.4);

            } else if (type === 'wrong') {
                // Ti·∫øng "B·ª•p" sai: √Çm tr·∫ßm
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.exponentialRampToValueAtTime(40, now + 0.3);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            } else if (type === 'tick') {
                // Ti·∫øng t√≠ch t·∫Øc: G√µ nh·∫π
                osc.type = 'square';
                osc.frequency.setValueAtTime(800, now);
                gainNode.gain.setValueAtTime(0.05, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                osc.start(now);
                osc.stop(now + 0.05);
            } else if (type === 'timeout') {
                // H·∫øt gi·ªù: Tr∆∞·ª£t xu·ªëng nhanh
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(400, now);
                osc.frequency.linearRampToValueAtTime(100, now + 0.5);
                gainNode.gain.setValueAtTime(0.2, now);
                gainNode.gain.linearRampToValueAtTime(0.01, now + 0.5);
                osc.start(now);
                osc.stop(now + 0.5);
            }
        };

        const RAW_DATA = [
            {
                id: 1,
                question: "Nh√† b√°c h·ªçc n√†o ƒë√£ ph√°t minh ra chi·∫øc m√°y t√≠nh c∆° h·ªçc ƒë·∫ßu ti√™n mang t√™n 'Pascaline' v√†o th·∫ø k·ª∑ XVII ƒë·ªÉ gi√∫p cha m√¨nh t√≠nh thu·∫ø?",
                correct: "Blaise Pascal",
                wrongs: ["Charles Babbage", "Ada Lovelace", "John von Neumann"]
            },
            {
                id: 2,
                question: "ƒê·ªÉ m√°y t√≠nh 'hi·ªÉu' v√† th·ª±c hi·ªán thu·∫≠t to√°n th√¨ ta c·∫ßn l√†m g√¨?",
                correct: "Vi·∫øt ch∆∞∆°ng tr√¨nh",
                wrongs: ["L·∫Øp r√°p linh ki·ªán", "V·∫Ω s∆° ƒë·ªì kh·ªëi", "Nh·∫≠p d·ªØ li·ªáu th·ªß c√¥ng"]
            },
            {
                id: 3,
                question: "ƒê·∫∑c tr∆∞ng c√¥ng ngh·ªá c·ªßa m√°y t√≠nh Th·∫ø h·ªá th·ª© ba (kho·∫£ng 1964-1971) l√† g√¨?",
                correct: "S·ª≠ d·ª•ng m·∫°ch t√≠ch h·ª£p (IC)",
                wrongs: ["S·ª≠ d·ª•ng b√≥ng ƒë√®n ch√¢n kh√¥ng", "S·ª≠ d·ª•ng b√≥ng b√°n d·∫´n", "S·ª≠ d·ª•ng vi x·ª≠ l√Ω VLSI"]
            },
            {
                id: 4,
                question: "Ch∆∞∆°ng tr√¨nh l√†?",
                correct: "D√£y c√°c l·ªánh ƒëi·ªÅu khi·ªÉn m√°y t√≠nh th·ª±c hi·ªán thu·∫≠t to√°n",
                wrongs: ["M·ªôt thi·∫øt b·ªã ph·∫ßn c·ª©ng c·ªßa m√°y t√≠nh", "M·ªôt s∆° ƒë·ªì m√¥ t·∫£ thu·∫≠t to√°n", "K·∫øt qu·∫£ hi·ªÉn th·ªã tr√™n m√†n h√¨nh"]
            },
            {
                id: 5,
                question: "S·ª± ra ƒë·ªùi c·ªßa Vi x·ª≠ l√Ω tr√™n m·ªôt chip duy nh·∫•t, k·∫øt h·ª£p CPU v√† b·ªô nh·ªõ, l√† th√†nh t·ª±u quan tr·ªçng nh·∫•t c·ªßa th·∫ø h·ªá m√°y t√≠nh n√†o?",
                correct: "Th·∫ø h·ªá th·ª© 4",
                wrongs: ["Th·∫ø h·ªá th·ª© 3", "Th·∫ø h·ªá th·ª© 2", "Th·∫ø h·ªá th·ª© 5"]
            },
            {
                id: 6,
                question: "Bi·∫øn (v√≠ d·ª• bi·∫øn ƒë·∫øm) th∆∞·ªùng ƒë∆∞·ª£c khai b√°o b·∫±ng ki·ªÉu d·ªØ li·ªáu n√†o sau ƒë√¢y?",
                correct: "Ki·ªÉu s·ªë th·ª±c (ho·∫∑c s·ªë nguy√™n)",
                wrongs: ["Ki·ªÉu x√¢u k√≠ t·ª±", "Ki·ªÉu Logic", "Ki·ªÉu m·∫£ng"]
            },
            {
                id: 7,
                question: "T√™n c·ªßa chi·∫øc m√°y t√≠nh ƒëi·ªán t·ª≠ ƒëa nƒÉng ƒë·∫ßu ti√™n ƒë∆∞·ª£c c√¥ng b·ªë v√†o nƒÉm 1945, s·ª≠ d·ª•ng h∆°n 18.000 ·ªëng ch√¢n kh√¥ng l√† g√¨?",
                correct: "ENIAC",
                wrongs: ["EDVAC", "UNIVAC", "IBM 360"]
            },
            {
                id: 8,
                question: "X√¢u k√≠ t·ª± c√≥ ph√©p to√°n n√†o d∆∞·ªõi ƒë√¢y?",
                correct: "K·∫øt h·ª£p (n·ªëi) c√°c x√¢u ƒë·ªÉ t·∫°o th√†nh x√¢u m·ªõi",
                wrongs: ["C·ªông tr·ª´ nh√¢n chia nh∆∞ s·ªë h·ªçc", "L·∫•y cƒÉn b·∫≠c hai", "T√≠nh l≈©y th·ª´a"]
            },
            {
                id: 9,
                question: "S·ª± ph√°t tri·ªÉn c·ªßa m√°y t√≠nh trong lƒ©nh v·ª±c c√¥ng nghi·ªáp s·∫£n xu·∫•t (t·ª± ƒë·ªông h√≥a) ƒë√£ mang l·∫°i l·ª£i √≠ch ch·ªß y·∫øu n√†o?",
                correct: "TƒÉng nƒÉng su·∫•t, gi·∫£m chi ph√≠ s·∫£n xu·∫•t v√† ƒë·∫£m b·∫£o ch√≠nh x√°c cao",
                wrongs: ["TƒÉng chi ph√≠ nh√¢n c√¥ng", "Gi·∫£m ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m", "L√†m ch·∫≠m quy tr√¨nh v·∫≠n h√†nh"]
            },
            {
                id: 10,
                question: "Bi·ªÉu th·ª©c t√≠nh ch·ªâ s·ªë BMI c·ªßa c∆° th·ªÉ tr·∫£ l·∫°i gi√° tr·ªã thu·ªôc ki·ªÉu d·ªØ li·ªáu n√†o?",
                correct: "Ki·ªÉu s·ªë",
                wrongs: ["Ki·ªÉu x√¢u k√≠ t·ª±", "Ki·ªÉu Logic", "Ki·ªÉu danh s√°ch"]
            },
            {
                id: 11,
                question: "V√≠ d·ª• n√†o sau ƒë√¢y th·ªÉ hi·ªán r√µ nh·∫•t ·∫£nh h∆∞·ªüng c·ªßa m√°y t√≠nh trong lƒ©nh v·ª±c gi√°o d·ª•c?",
                correct: "T·∫°o ra kh·∫£ nƒÉng h·ªçc t·∫≠p m·ªçi l√∫c, m·ªçi n∆°i th√¥ng qua c√°c kh√≥a h·ªçc tr·ª±c tuy·∫øn (E-Learning)",
                wrongs: ["ƒêi·ªÅu khi·ªÉn d√¢y chuy·ªÅn l·∫Øp r√°p t·ª± ƒë·ªông", "H·ªó tr·ª£ ch·∫©n ƒëo√°n b·ªánh qua h√¨nh ·∫£nh", "T·∫°o hi·ªáu ·ª©ng k·ªπ x·∫£o ƒëi·ªán ·∫£nh"]
            },
            {
                id: 12,
                question: "Kh√°i ni·ªám Ki·ªÉu d·ªØ li·ªáu (Data Type) d√πng ƒë·ªÉ ch·ªâ ƒëi·ªÅu g√¨?",
                correct: "T·∫≠p h·ª£p c√°c gi√° tr·ªã m√† m·ªôt bi·∫øn ho·∫∑c h·∫±ng c√≥ th·ªÉ nh·∫≠n ƒë∆∞·ª£c, c√πng v·ªõi c√°c ph√©p to√°n c√≥ th·ªÉ th·ª±c hi·ªán",
                wrongs: ["T·∫≠p h·ª£p c√°c thi·∫øt b·ªã ph·∫ßn c·ª©ng m√°y t√≠nh", "Danh s√°ch c√°c c√¢u l·ªánh l·∫≠p tr√¨nh", "T√™n c·ªßa c√°c bi·∫øn trong ch∆∞∆°ng tr√¨nh"]
            },
            {
                id: 13,
                question: "·∫¢nh h∆∞·ªüng c·ªßa m√°y t√≠nh trong lƒ©nh v·ª±c gi·∫£i tr√≠ v√† truy·ªÅn th√¥ng l√† g√¨?",
                correct: "Hi·ªán th·ª±c c√°c tr√≤ ch∆°i ƒëi·ªán t·ª≠, phim ·∫£nh v√† √¢m nh·∫°c v·ªõi hi·ªáu ·ª©ng ph·ª©c t·∫°p v√† ch√¢n th·ª±c h∆°n",
                wrongs: ["H·ªó tr·ª£ ph·∫´u thu·∫≠t t·ª´ xa", "ƒêi·ªÅu khi·ªÉn bay t·ª± ƒë·ªông", "Qu·∫£n l√Ω h·ªì s∆° nh√¢n s·ª±"]
            },
            {
                id: 14,
                question: "Bi·ªÉu th·ª©c l√† s·ª± k·∫øt h·ª£p c·ªßa?",
                correct: "Bi·∫øn v√† h·∫±ng, d·∫•u ngo·∫∑c, ph√©p to√°n v√† c√°c h√†m",
                wrongs: ["Ch·ªâ c√≥ c√°c con s·ªë", "Ch·ªâ c√≥ c√°c bi·∫øn s·ªë", "B√†n ph√≠m v√† chu·ªôt"]
            },
            {
                id: 15,
                question: "C√°c ki·ªÉu d·ªØ li·ªáu trong l·∫≠p tr√¨nh Scratch? (Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t)",
                correct: "S·ªë, X√¢u k√≠ t·ª±, Logic",
                wrongs: ["VƒÉn b·∫£n, H√¨nh ·∫£nh, √Çm thanh", "Input, Output, CPU", "Ph·∫ßn c·ª©ng, Ph·∫ßn m·ªÅm"]
            },
            {
                id: 16,
                question: "H·∫±ng l√†:",
                correct: "Gi√° tr·ªã kh√¥ng ƒë·ªïi trong qu√° tr√¨nh th·ª±c hi·ªán ch∆∞∆°ng tr√¨nh",
                wrongs: ["Gi√° tr·ªã thay ƒë·ªïi li√™n t·ª•c", "T√™n g·ªçi c·ªßa m·ªôt v√πng nh·ªõ bi·∫øn ƒë·ªïi", "M·ªôt c√¢u l·ªánh l·∫∑p"]
            },
            {
                id: 17,
                question: "Th√¥ng tin s·ªë l√†? (Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t)",
                correct: "Th√¥ng tin ƒë∆∞·ª£c m√£ h√≥a th√†nh d√£y bit",
                wrongs: ["Th√¥ng tin tr√™n gi·∫•y t·ªù", "Th√¥ng tin truy·ªÅn mi·ªáng", "Th√¥ng tin d·∫°ng s√≥ng analog"]
            },
            {
                id: 18,
                question: "ƒê·∫∑c ƒëi·ªÉm c·ªßa th√¥ng tin s·ªë l√†?",
                correct: "C√≥ th·ªÉ truy c·∫≠p t·ª´ xa th√¥ng qua k·∫øt n·ªëi internet",
                wrongs: ["Kh√≥ sao ch√©p v√† ch·ªânh s·ª≠a", "Ch·ªâ truy c·∫≠p ƒë∆∞·ª£c khi ·ªü g·∫ßn ngu·ªìn ph√°t", "Kh√¥ng th·ªÉ l∆∞u tr·ªØ l√¢u d√†i"]
            },
            {
                id: 19,
                question: "ƒê√¢u KH√îNG PH·∫¢I l√† ƒë·∫∑c ƒëi·ªÉm c·ªßa th√¥ng tin s·ªë?",
                correct: "Th√¥ng tin s·ªë ch·ªâ c√≥ th·ªÉ truy c·∫≠p ·ªü kho·∫£ng c√°ch g·∫ßn",
                wrongs: ["D·ªÖ d√†ng sao ch√©p v√† chia s·∫ª", "C√≥ th·ªÉ l∆∞u tr·ªØ v·ªõi dung l∆∞·ª£ng l·ªõn", "ƒê∆∞·ª£c m√£ h√≥a th√†nh d√£y bit"]
            },
            {
                id: 20,
                question: "ƒê√¢u KH√îNG PH·∫¢I l√† ƒë·∫∑c ƒëi·ªÉm ƒë√∫ng v·ªÅ ƒë·ªô tin c·∫≠y c·ªßa th√¥ng tin s·ªë?",
                correct: "Th√¥ng tin s·ªë c√≥ ƒë·ªô tin c·∫≠y gi·ªëng nhau",
                wrongs: ["Th√¥ng tin tr√™n m·∫°ng c√≥ th·ªÉ l√† tin gi·∫£", "C·∫ßn ki·ªÉm tra ngu·ªìn g·ªëc th√¥ng tin", "Th√¥ng tin t·ª´ c∆° quan ch√≠nh ph·ªß th∆∞·ªùng tin c·∫≠y cao"]
            },
            {
                id: 21,
                question: "Trong l·∫≠p tr√¨nh, Bi·∫øn (Variable) l√† g√¨?",
                correct: "T√™n g·ªçi ƒë∆∞·ª£c ƒë·∫∑t cho 1 v√πng nh·ªõ, d√πng ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu v√† gi√° tr·ªã c·ªßa n√≥ c√≥ th·ªÉ thay ƒë·ªïi",
                wrongs: ["Gi√° tr·ªã c·ªë ƒë·ªãnh kh√¥ng th·ªÉ thay ƒë·ªïi", "M·ªôt ph√©p to√°n s·ªë h·ªçc", "M·ªôt thi·∫øt b·ªã l∆∞u tr·ªØ ngo√†i"]
            },
            {
                id: 22,
                question: "Trong m√¥i tr∆∞·ªùng s·ªë, c√¥ng c·ª• t√¨m ki·∫øm (v√≠ d·ª•: Google, Bing) gi√∫p ch√∫ng ta th·ª±c hi·ªán thao t√°c n√†o l√† ch·ªß y·∫øu?",
                correct: "T√¨m ki·∫øm v√† thu th·∫≠p th√¥ng tin",
                wrongs: ["So·∫°n th·∫£o vƒÉn b·∫£n", "Ch·ªânh s·ª≠a h√¨nh ·∫£nh", "L·∫≠p tr√¨nh ph·∫ßn m·ªÅm"]
            },
            {
                id: 23,
                question: "V√≠ d·ª• n√†o sau ƒë√¢y minh h·ªça cho h·∫≠u qu·∫£ nghi√™m tr·ªçng c·ªßa vi·ªác s·ª≠ d·ª•ng th√¥ng tin kh√¥ng ƒë√°ng tin c·∫≠y?",
                correct: "M·ªôt ng∆∞·ªùi b·ªánh t·ª± √Ω d√πng thu·ªëc theo b√†i thu·ªëc 'truy·ªÅn mi·ªáng' tr√™n m·∫°ng d·∫´n ƒë·∫øn s·ª©c kh·ªèe x·∫•u ƒëi",
                wrongs: ["M·∫•t k·∫øt n·ªëi Internet", "M√°y t√≠nh b·ªã nhi·ªÖm virus nh·∫π", "H·ªçc th√™m ƒë∆∞·ª£c ki·∫øn th·ª©c m·ªõi"]
            },
            {
                id: 24,
                question: "Khi mu·ªën trao ƒë·ªïi √Ω ki·∫øn v·ªÅ m·ªôt d·ª± √°n nh√≥m v·ªõi c√°c th√†nh vi√™n kh√°c ƒëang ·ªü xa, c√¥ng c·ª• n√†o trong m√¥i tr∆∞·ªùng s·ªë l√† ph√π h·ª£p nh·∫•t?",
                correct: "C√°c ·ª©ng d·ª•ng tr·ª±c tuy·∫øn ho·∫∑c c√°c c√¥ng c·ª• c·ªông t√°c tr·ª±c tuy·∫øn",
                wrongs: ["G·∫∑p m·∫∑t tr·ª±c ti·∫øp", "Vi·∫øt th∆∞ tay g·ª≠i b∆∞u ƒëi·ªán", "G·ª≠i USB ch·ª©a d·ªØ li·ªáu"]
            },
            {
                id: 25,
                question: "V√¨ sao vi·ªác khai th√°c c√°c ngu·ªìn th√¥ng tin ƒë√°ng tin c·∫≠y l·∫°i v√¥ c√πng quan tr·ªçng ƒë·ªëi v·ªõi h·ªçc sinh?",
                correct: "V√¨ n√≥ gi√∫p x√¢y d·ª±ng ki·∫øn th·ª©c ch√≠nh x√°c, ƒë∆∞a ra quy·∫øt ƒë·ªãnh ƒë√∫ng ƒë·∫Øn v√† lo·∫°i b·ªè tin gi·∫£",
                wrongs: ["ƒê·ªÉ m√°y t√≠nh ch·∫°y nhanh h∆°n", "ƒê·ªÉ ti·∫øt ki·ªám dung l∆∞·ª£ng ·ªï c·ª©ng", "ƒê·ªÉ tƒÉng s·ªë l∆∞·ª£ng b·∫°n b√® tr√™n m·∫°ng"]
            },
            {
                id: 26,
                question: "Khi s·ª≠ d·ª•ng Google ƒë·ªÉ t√¨m ki·∫øm t√†i li·ªáu cho b√†i t·∫≠p m√¥n L·ªãch s·ª≠, thao t√°c n√†o sau ƒë√¢y th·ª±c hi·ªán vi·ªác khai th√°c th√¥ng tin?",
                correct: "G√µ t·ª´ kh√≥a v√†o thanh c√¥ng c·ª• t√¨m ki·∫øm v√† thu th·∫≠p k·∫øt qu·∫£ v·ªÅ t·ª´ c√°c trang web",
                wrongs: ["T·∫Øt m√†n h√¨nh m√°y t√≠nh", "Ng·∫Øt k·∫øt n·ªëi m·∫°ng", "M·ªü ph·∫ßn m·ªÅm so·∫°n th·∫£o"]
            },
            {
                id: 27,
                question: "Khi nh·∫≠n ƒë∆∞·ª£c m·ªôt th√¥ng tin c·∫£nh b√°o kh·∫©n c·∫•p t·ª´ m·ªôt t√†i kho·∫£n kh√¥ng ch√≠nh th·ª©c tr√™n m·∫°ng x√£ h·ªôi, em c·∫ßn l√†m g√¨ ƒë·∫ßu ti√™n ƒë·ªÉ ki·ªÉm tra ƒë·ªô tin c·∫≠y?",
                correct: "Ki·ªÉm tra ngu·ªìn tin (xem c√°c ngu·ªìn tin uy t√≠n c√≥ ƒë∆∞a tin kh√¥ng)",
                wrongs: ["Chia s·∫ª ngay cho m·ªçi ng∆∞·ªùi", "L√†m theo h∆∞·ªõng d·∫´n ngay l·∫≠p t·ª©c", "X√≥a t√†i kho·∫£n m·∫°ng x√£ h·ªôi"]
            }
        ];

        function shuffleArray(array) {
            const newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }

        function App() {
            const [gameState, setGameState] = useState('start');
            const [questions, setQuestions] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [showFeedback, setShowFeedback] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [history, setHistory] = useState([]);
            const [streak, setStreak] = useState(0);
            const [isExiting, setIsExiting] = useState(false);
            
            // TIMER STATE
            const TIME_PER_QUESTION = 30;
            const [timeLeft, setTimeLeft] = useState(TIME_PER_QUESTION);

            // B·∫Øt ƒë·∫ßu game
            const startQuiz = () => {
                // Resume AudioContext khi user t∆∞∆°ng t√°c l·∫ßn ƒë·∫ßu (policy browser)
                if (audioCtx.state === 'suspended') audioCtx.resume();

                const shuffledQs = shuffleArray(RAW_DATA).map(q => {
                    const options = shuffleArray([q.correct, ...q.wrongs]);
                    return { ...q, options };
                });
                
                setQuestions(shuffledQs);
                setCurrentIndex(0);
                setScore(0);
                setHistory([]);
                setStreak(0);
                setIsExiting(false);
                setGameState('playing');
                setShowFeedback(false);
                setTimeLeft(TIME_PER_QUESTION);
            };

            // Timer Logic
            useEffect(() => {
                if (gameState !== 'playing' || showFeedback || isExiting) return;

                const timer = setInterval(() => {
                    setTimeLeft((prev) => {
                        if (prev <= 1) {
                            clearInterval(timer);
                            handleTimeout(); // H·∫øt gi·ªù!
                            return 0;
                        }
                        // Hi·ªáu ·ª©ng √¢m thanh 5 gi√¢y cu·ªëi
                        if (prev <= 6) playSound('tick');
                        return prev - 1;
                    });
                }, 1000);

                return () => clearInterval(timer);
            }, [gameState, showFeedback, isExiting, currentIndex]); // Reset timer khi index ƒë·ªïi

            // X·ª≠ l√Ω khi h·∫øt gi·ªù
            const handleTimeout = () => {
                playSound('timeout');
                handleAnswer(null, true); // null = kh√¥ng ch·ªçn g√¨, true = do h·∫øt gi·ªù
            };

            const handleAnswer = (answer, isTimeout = false) => {
                if (showFeedback || isExiting) return;

                const currentQ = questions[currentIndex];
                let correct = false;
                
                if (!isTimeout) {
                    correct = answer === currentQ.correct;
                    playSound(correct ? 'correct' : 'wrong');
                }

                setSelectedAnswer(isTimeout ? 'TIMEOUT' : answer);
                setShowFeedback(true);

                if (correct) {
                    setScore(s => s + 1);
                    setStreak(s => s + 1);
                } else {
                    setStreak(0);
                }

                setHistory(prev => [...prev, {
                    question: currentQ.question,
                    selected: isTimeout ? "H·∫øt gi·ªù!" : answer,
                    correct: currentQ.correct,
                    isCorrect: correct
                }]);

                // Chuy·ªÉn c√¢u (Nhanh)
                setTimeout(() => {
                    setIsExiting(true);
                    setTimeout(() => {
                        if (currentIndex < questions.length - 1) {
                            setCurrentIndex(prev => prev + 1);
                            setTimeLeft(TIME_PER_QUESTION); // Reset time
                            setShowFeedback(false);
                            setSelectedAnswer(null);
                            setIsExiting(false);
                        } else {
                            setGameState('finished');
                        }
                    }, 250);
                }, 1200); // Ch·∫≠m l·∫°i x√≠u ƒë·ªÉ k·ªãp nghe √¢m thanh
            };

            // T√≠nh m√†u s·∫Øc timer
            const timerColor = timeLeft <= 5 ? 'bg-red-500 timer-pulse' : timeLeft <= 10 ? 'bg-yellow-500' : 'bg-indigo-500';
            const timerWidth = (timeLeft / TIME_PER_QUESTION) * 100;

            return (
                <div className="glass-effect rounded-3xl shadow-2xl border border-white/50 overflow-hidden w-full relative min-h-[600px] flex flex-col transition-all duration-300">
                    
                    {/* Header */}
                    {gameState === 'playing' && (
                        <div className="bg-white/50 backdrop-blur-sm sticky top-0 z-20 border-b border-gray-100 transition-all duration-300">
                            <div className="flex justify-between items-center px-6 py-4">
                                <div className="flex items-center gap-3">
                                    <div className="bg-indigo-100 text-indigo-600 w-10 h-10 rounded-xl flex items-center justify-center font-bold shadow-sm">
                                        {currentIndex + 1}
                                    </div>
                                    <span className="text-gray-400 text-sm font-semibold">/ {questions.length}</span>
                                </div>
                                
                                {/* TIMER DISPLAY */}
                                <div className="flex flex-col items-center w-full max-w-[200px] mx-4">
                                    <div className="flex justify-between w-full text-xs font-bold text-gray-400 mb-1">
                                        <span><i className="far fa-clock"></i> Th·ªùi gian</span>
                                        <span className={`${timeLeft <= 5 ? 'text-red-500' : 'text-indigo-600'}`}>{timeLeft}s</span>
                                    </div>
                                    <div className="h-2.5 w-full bg-gray-200 rounded-full overflow-hidden">
                                        <div 
                                            className={`h-full rounded-full transition-all duration-1000 ease-linear ${timerColor}`}
                                            style={{ width: `${timerWidth}%` }}
                                        ></div>
                                    </div>
                                </div>

                                <div className="flex items-center gap-4">
                                    {streak > 1 && (
                                        <div className="hidden sm:flex items-center gap-1 text-orange-500 font-bold animate-pulse">
                                            <i className="fas fa-fire"></i> {streak}
                                        </div>
                                    )}
                                    <div className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-1.5 rounded-full text-sm font-bold shadow-lg shadow-indigo-200">
                                        {score} ƒë
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Area */}
                    <div className="flex-1 p-4 md:p-8 flex flex-col justify-center items-center w-full relative overflow-hidden">
                        
                        {/* Start Screen */}
                        {gameState === 'start' && (
                            <div className="text-center scale-in max-w-md mx-auto">
                                <div className="w-32 h-32 bg-gradient-to-tr from-indigo-100 to-purple-100 rounded-3xl rotate-3 flex items-center justify-center mx-auto mb-8 shadow-inner transform transition hover:rotate-6 duration-500">
                                    <i className="fas fa-gamepad text-6xl text-indigo-600 drop-shadow-sm"></i>
                                </div>
                                <h1 className="text-4xl md:text-5xl font-bold text-gray-800 mb-4 tracking-tight">
                                    Tin H·ªçc 8
                                </h1>
                                <p className="text-gray-500 mb-8 text-lg font-medium">√în t·∫≠p c√≥ t√≠nh gi·ªù & √¢m thanh.</p>
                                
                                <button 
                                    onClick={startQuiz}
                                    className="group relative inline-flex items-center justify-center px-8 py-4 font-bold text-white transition-all duration-200 bg-indigo-600 font-lg rounded-2xl hover:bg-indigo-700 hover:shadow-xl hover:-translate-y-1 focus:outline-none ring-offset-2 focus:ring-2 ring-indigo-500 w-full sm:w-auto"
                                >
                                    <span className="mr-2">B·∫Øt ƒê·∫ßu</span>
                                    <i className="fas fa-play group-hover:translate-x-1 transition-transform"></i>
                                </button>
                            </div>
                        )}

                        {/* Question Screen */}
                        {gameState === 'playing' && questions.length > 0 && (
                            <div 
                                className={`w-full max-w-2xl transition-all ${isExiting ? 'slide-out-left' : 'slide-in-right'}`} 
                                key={currentIndex}
                            >
                                <div className="mb-8 relative">
                                    <h3 className="text-xl md:text-2xl font-bold text-gray-800 leading-normal">
                                        {questions[currentIndex].question}
                                    </h3>
                                </div>

                                <div className="grid gap-4">
                                    {questions[currentIndex].options.map((opt, idx) => {
                                        let btnClass = "group w-full text-left p-5 rounded-2xl border-2 transition-all duration-200 relative overflow-hidden ";
                                        let icon = <span className="w-8 h-8 rounded-lg bg-gray-100 text-gray-500 flex items-center justify-center font-bold text-sm mr-4 group-hover:bg-indigo-100 group-hover:text-indigo-600 transition-colors">{String.fromCharCode(65 + idx)}</span>;

                                        if (showFeedback) {
                                            if (opt === questions[currentIndex].correct) {
                                                btnClass += "bg-green-50 border-green-500 shadow-md ring-1 ring-green-500 ";
                                                icon = <span className="w-8 h-8 rounded-lg bg-green-500 text-white flex items-center justify-center mr-4 shadow-sm"><i className="fas fa-check"></i></span>;
                                            } else if (opt === selectedAnswer) {
                                                btnClass += "bg-red-50 border-red-500 shadow-md ";
                                                icon = <span className="w-8 h-8 rounded-lg bg-red-500 text-white flex items-center justify-center mr-4 shadow-sm"><i className="fas fa-times"></i></span>;
                                            } else {
                                                btnClass += "bg-white/50 border-gray-100 text-gray-400 opacity-60 grayscale ";
                                            }
                                        } else {
                                            btnClass += "bg-white border-white shadow-sm hover:border-indigo-300 hover:shadow-lg hover:shadow-indigo-100 hover:bg-indigo-50/30 ";
                                        }

                                        return (
                                            <button 
                                                key={idx}
                                                onClick={() => handleAnswer(opt)}
                                                disabled={showFeedback || isExiting}
                                                className={btnClass}
                                            >
                                                <div className="flex items-start">
                                                    {icon}
                                                    <span className={`font-medium text-lg ${showFeedback && opt === questions[currentIndex].correct ? 'text-green-800' : 'text-gray-700'}`}>
                                                        {opt}
                                                    </span>
                                                </div>
                                            </button>
                                        );
                                    })}
                                </div>

                                {/* Feedback Text */}
                                {showFeedback && (
                                    <div className={`mt-6 text-center font-bold animate-bounce ${selectedAnswer === 'TIMEOUT' ? 'text-red-500' : selectedAnswer === questions[currentIndex].correct ? 'text-green-600' : 'text-red-500'}`}>
                                        {selectedAnswer === 'TIMEOUT' ? '‚è∞ H·∫æT GI·ªú!' : 
                                         selectedAnswer === questions[currentIndex].correct ? 'üéâ CH√çNH X√ÅC!' : '‚ùå SAI R·ªíI!'}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Result Screen */}
                        {gameState === 'finished' && (
                            <div className="w-full h-full flex flex-col items-center slide-in-right">
                                <div className="text-center mb-8 relative">
                                    <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full flex justify-center pointer-events-none">
                                        {[...Array(5)].map((_, i) => (
                                            <div key={i} className="animate-ping absolute top-10 opacity-20" style={{
                                                left: `${20 + i * 15}%`, 
                                                animationDelay: `${i * 0.2}s`,
                                                color: score > questions.length * 0.7 ? '#fbbf24' : '#9ca3af'
                                            }}>‚òÖ</div>
                                        ))}
                                    </div>

                                    <div className={`w-28 h-28 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl border-4 border-white ${score > questions.length/2 ? 'bg-gradient-to-br from-yellow-300 to-orange-400 text-white' : 'bg-gray-200 text-gray-500'}`}>
                                        <i className={`fas fa-trophy text-5xl`}></i>
                                    </div>
                                    
                                    <h2 className="text-3xl font-bold text-gray-800 mb-2">K·∫øt qu·∫£</h2>
                                    <div className="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 my-4 tracking-tight">
                                        {score}<span className="text-3xl text-gray-400 font-medium">/{questions.length}</span>
                                    </div>
                                    
                                    <div className="inline-block px-4 py-2 bg-gray-100 rounded-lg text-gray-600 font-semibold text-sm">
                                        {score === questions.length ? "Tuy·ªát ƒë·ªëi! B·∫°n l√† thi√™n t√†i üåü" : 
                                         score > questions.length * 0.8 ? "R·∫•t gi·ªèi! üí™" : 
                                         "C·ªë g·∫Øng l√™n nh√©! üçÄ"}
                                    </div>
                                </div>

                                <button 
                                    onClick={startQuiz}
                                    className="mb-8 px-8 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 hover:shadow-indigo-200 hover:-translate-y-1 transition-all flex items-center gap-2"
                                >
                                    <i className="fas fa-redo-alt"></i> L√†m L·∫°i B√†i
                                </button>

                                {/* Review List */}
                                <div className="w-full bg-white rounded-2xl shadow-sm border border-gray-100 flex flex-col max-h-[400px]">
                                    <div className="p-4 border-b border-gray-100 bg-gray-50/50 rounded-t-2xl flex justify-between items-center sticky top-0 backdrop-blur-sm">
                                        <h3 className="font-bold text-gray-700">Chi ti·∫øt ƒë√°p √°n</h3>
                                        <span className="text-xs text-gray-500 font-medium bg-white px-2 py-1 rounded border">Cu·ªôn ƒë·ªÉ xem</span>
                                    </div>
                                    <div className="overflow-y-auto p-4 custom-scroll space-y-4">
                                        {history.map((item, idx) => (
                                            <div key={idx} className="flex gap-4">
                                                <div className={`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center font-bold text-sm text-white ${item.isCorrect ? 'bg-green-500' : 'bg-red-500'}`}>
                                                    {idx + 1}
                                                </div>
                                                <div className="flex-1 pb-4 border-b border-gray-50 last:border-0 last:pb-0">
                                                    <p className="font-semibold text-gray-800 text-sm mb-2">{item.question}</p>
                                                    
                                                    {!item.isCorrect && (
                                                        <div className="text-red-500 text-sm mb-1 flex items-start gap-2">
                                                            <i className="fas fa-times mt-1"></i>
                                                            <span>{item.selected === "H·∫øt gi·ªù!" ? "‚è∞ H·∫øt gi·ªù" : <span>B·∫°n ch·ªçn: <span className="font-bold">{item.selected}</span></span>}</span>
                                                        </div>
                                                    )}
                                                    <div className="text-green-600 text-sm flex items-start gap-2">
                                                        <i className="fas fa-check mt-1"></i>
                                                        <span>ƒê√°p √°n: <span className="font-bold">{item.correct}</span></span>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
